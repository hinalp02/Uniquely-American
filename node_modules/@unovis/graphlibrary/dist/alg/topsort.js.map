{"version":3,"file":"topsort.js","sources":["../../lib/alg/topsort.js"],"sourcesContent":["import _size from 'lodash-es/size'\nimport _each from 'lodash-es/each'\nimport _has from 'lodash-es/has'\n\nfunction topsort (g) {\n  const visited = {}\n  const stack = {}\n  const results = []\n\n  function visit (node) {\n    if (_has(stack, node)) {\n      throw new CycleException()\n    }\n\n    if (!_has(visited, node)) {\n      stack[node] = true\n      visited[node] = true\n\n      _each(g.predecessors(node), visit)\n\n      delete stack[node]\n      results.push(node)\n    }\n  }\n\n  _each(g.sinks(), visit)\n\n  if (_size(visited) !== g.nodeCount()) {\n    throw new CycleException()\n  }\n\n  return results\n}\n\nfunction CycleException () {}\n\nCycleException.prototype = new Error() // must be an instance of Error to pass testing\n\ntopsort.CycleException = CycleException\nexport default topsort\n"],"names":[],"mappings":";;;;AAIA,SAAS,OAAO,EAAE,CAAC,EAAE;AACrB,EAAE,MAAM,OAAO,GAAG,GAAE;AACpB,EAAE,MAAM,KAAK,GAAG,GAAE;AAClB,EAAE,MAAM,OAAO,GAAG,GAAE;AACpB;AACA,EAAE,SAAS,KAAK,EAAE,IAAI,EAAE;AACxB,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE;AAC3B,MAAM,MAAM,IAAI,cAAc,EAAE;AAChC,KAAK;AACL;AACA,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,EAAE;AAC9B,MAAM,KAAK,CAAC,IAAI,CAAC,GAAG,KAAI;AACxB,MAAM,OAAO,CAAC,IAAI,CAAC,GAAG,KAAI;AAC1B;AACA,MAAM,KAAK,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,KAAK,EAAC;AACxC;AACA,MAAM,OAAO,KAAK,CAAC,IAAI,EAAC;AACxB,MAAM,OAAO,CAAC,IAAI,CAAC,IAAI,EAAC;AACxB,KAAK;AACL,GAAG;AACH;AACA,EAAE,KAAK,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE,KAAK,EAAC;AACzB;AACA,EAAE,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,SAAS,EAAE,EAAE;AACxC,IAAI,MAAM,IAAI,cAAc,EAAE;AAC9B,GAAG;AACH;AACA,EAAE,OAAO,OAAO;AAChB,CAAC;AACD;AACA,SAAS,cAAc,IAAI,EAAE;AAC7B;AACA,cAAc,CAAC,SAAS,GAAG,IAAI,KAAK,GAAE;AACtC;AACA,OAAO,CAAC,cAAc,GAAG;;;;"}