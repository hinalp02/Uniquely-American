{"version":3,"file":"tarjan.js","sources":["../../lib/alg/tarjan.js"],"sourcesContent":["import _has from 'lodash-es/has'\nexport default tarjan\n\nfunction tarjan (g) {\n  let index = 0\n  const stack = []\n  const visited = {} // node id -> { onStack, lowlink, index }\n\n  const results = []\n\n  function dfs (v) {\n    var entry = visited[v] = {\n      onStack: true,\n      lowlink: index,\n      index: index++\n    }\n    stack.push(v)\n    g.successors(v).forEach(function (w) {\n      if (!_has(visited, w)) {\n        dfs(w)\n        entry.lowlink = Math.min(entry.lowlink, visited[w].lowlink)\n      } else if (visited[w].onStack) {\n        entry.lowlink = Math.min(entry.lowlink, visited[w].index)\n      }\n    })\n\n    if (entry.lowlink === entry.index) {\n      const cmpt = []\n      let w\n\n      do {\n        w = stack.pop()\n        visited[w].onStack = false\n        cmpt.push(w)\n      } while (v !== w)\n\n      results.push(cmpt)\n    }\n  }\n\n  g.nodes().forEach(function (v) {\n    if (!_has(visited, v)) {\n      dfs(v)\n    }\n  })\n  return results\n}\n"],"names":[],"mappings":";;AAGA,SAAS,MAAM,EAAE,CAAC,EAAE;AACpB,EAAE,IAAI,KAAK,GAAG,EAAC;AACf,EAAE,MAAM,KAAK,GAAG,GAAE;AAClB,EAAE,MAAM,OAAO,GAAG,GAAE;AACpB;AACA,EAAE,MAAM,OAAO,GAAG,GAAE;AACpB;AACA,EAAE,SAAS,GAAG,EAAE,CAAC,EAAE;AACnB,IAAI,IAAI,KAAK,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG;AAC7B,MAAM,OAAO,EAAE,IAAI;AACnB,MAAM,OAAO,EAAE,KAAK;AACpB,MAAM,KAAK,EAAE,KAAK,EAAE;AACpB,MAAK;AACL,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC,EAAC;AACjB,IAAI,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;AACzC,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE;AAC7B,QAAQ,GAAG,CAAC,CAAC,EAAC;AACd,QAAQ,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,EAAC;AACnE,OAAO,MAAM,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE;AACrC,QAAQ,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,EAAC;AACjE,OAAO;AACP,KAAK,EAAC;AACN;AACA,IAAI,IAAI,KAAK,CAAC,OAAO,KAAK,KAAK,CAAC,KAAK,EAAE;AACvC,MAAM,MAAM,IAAI,GAAG,GAAE;AACrB,MAAM,IAAI,EAAC;AACX;AACA,MAAM,GAAG;AACT,QAAQ,CAAC,GAAG,KAAK,CAAC,GAAG,GAAE;AACvB,QAAQ,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,MAAK;AAClC,QAAQ,IAAI,CAAC,IAAI,CAAC,CAAC,EAAC;AACpB,OAAO,QAAQ,CAAC,KAAK,CAAC,CAAC;AACvB;AACA,MAAM,OAAO,CAAC,IAAI,CAAC,IAAI,EAAC;AACxB,KAAK;AACL,GAAG;AACH;AACA,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;AACjC,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE;AAC3B,MAAM,GAAG,CAAC,CAAC,EAAC;AACZ,KAAK;AACL,GAAG,EAAC;AACJ,EAAE,OAAO,OAAO;AAChB;;;;"}