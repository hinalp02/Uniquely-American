{"version":3,"file":"floyd-warshall.js","sources":["../../lib/alg/floyd-warshall.js"],"sourcesContent":["import _constant from 'lodash-es/constant'\nexport default floydWarshall\n\nvar DEFAULT_WEIGHT_FUNC = _constant(1)\n\nfunction floydWarshall (g, weightFn, edgeFn) {\n  return runFloydWarshall(g, weightFn || DEFAULT_WEIGHT_FUNC, edgeFn || function (v) {\n    return g.outEdges(v)\n  })\n}\n\nfunction runFloydWarshall (g, weightFn, edgeFn) {\n  const results = {}\n  const nodes = g.nodes()\n  nodes.forEach(function (v) {\n    results[v] = {}\n    results[v][v] = {\n      distance: 0\n    }\n    nodes.forEach(function (w) {\n      if (v !== w) {\n        results[v][w] = {\n          distance: Number.POSITIVE_INFINITY\n        }\n      }\n    })\n    edgeFn(v).forEach(function (edge) {\n      const w = edge.v === v ? edge.w : edge.v\n      const d = weightFn(edge)\n      results[v][w] = {\n        distance: d,\n        predecessor: v\n      }\n    })\n  })\n  nodes.forEach(function (k) {\n    var rowK = results[k]\n    nodes.forEach(function (i) {\n      var rowI = results[i]\n      nodes.forEach(function (j) {\n        var ik = rowI[k]\n        var kj = rowK[j]\n        var ij = rowI[j]\n        var altDistance = ik.distance + kj.distance\n\n        if (altDistance < ij.distance) {\n          ij.distance = altDistance\n          ij.predecessor = kj.predecessor\n        }\n      })\n    })\n  })\n  return results\n}\n"],"names":[],"mappings":";;AAGA,IAAI,mBAAmB,GAAG,SAAS,CAAC,CAAC,EAAC;AACtC;AACA,SAAS,aAAa,EAAE,CAAC,EAAE,QAAQ,EAAE,MAAM,EAAE;AAC7C,EAAE,OAAO,gBAAgB,CAAC,CAAC,EAAE,QAAQ,IAAI,mBAAmB,EAAE,MAAM,IAAI,UAAU,CAAC,EAAE;AACrF,IAAI,OAAO,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;AACxB,GAAG,CAAC;AACJ,CAAC;AACD;AACA,SAAS,gBAAgB,EAAE,CAAC,EAAE,QAAQ,EAAE,MAAM,EAAE;AAChD,EAAE,MAAM,OAAO,GAAG,GAAE;AACpB,EAAE,MAAM,KAAK,GAAG,CAAC,CAAC,KAAK,GAAE;AACzB,EAAE,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;AAC7B,IAAI,OAAO,CAAC,CAAC,CAAC,GAAG,GAAE;AACnB,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG;AACpB,MAAM,QAAQ,EAAE,CAAC;AACjB,MAAK;AACL,IAAI,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;AAC/B,MAAM,IAAI,CAAC,KAAK,CAAC,EAAE;AACnB,QAAQ,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG;AACxB,UAAU,QAAQ,EAAE,MAAM,CAAC,iBAAiB;AAC5C,UAAS;AACT,OAAO;AACP,KAAK,EAAC;AACN,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,IAAI,EAAE;AACtC,MAAM,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAC;AAC9C,MAAM,MAAM,CAAC,GAAG,QAAQ,CAAC,IAAI,EAAC;AAC9B,MAAM,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG;AACtB,QAAQ,QAAQ,EAAE,CAAC;AACnB,QAAQ,WAAW,EAAE,CAAC;AACtB,QAAO;AACP,KAAK,EAAC;AACN,GAAG,EAAC;AACJ,EAAE,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;AAC7B,IAAI,IAAI,IAAI,GAAG,OAAO,CAAC,CAAC,EAAC;AACzB,IAAI,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;AAC/B,MAAM,IAAI,IAAI,GAAG,OAAO,CAAC,CAAC,EAAC;AAC3B,MAAM,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;AACjC,QAAQ,IAAI,EAAE,GAAG,IAAI,CAAC,CAAC,EAAC;AACxB,QAAQ,IAAI,EAAE,GAAG,IAAI,CAAC,CAAC,EAAC;AACxB,QAAQ,IAAI,EAAE,GAAG,IAAI,CAAC,CAAC,EAAC;AACxB,QAAQ,IAAI,WAAW,GAAG,EAAE,CAAC,QAAQ,GAAG,EAAE,CAAC,SAAQ;AACnD;AACA,QAAQ,IAAI,WAAW,GAAG,EAAE,CAAC,QAAQ,EAAE;AACvC,UAAU,EAAE,CAAC,QAAQ,GAAG,YAAW;AACnC,UAAU,EAAE,CAAC,WAAW,GAAG,EAAE,CAAC,YAAW;AACzC,SAAS;AACT,OAAO,EAAC;AACR,KAAK,EAAC;AACN,GAAG,EAAC;AACJ,EAAE,OAAO,OAAO;AAChB;;;;"}