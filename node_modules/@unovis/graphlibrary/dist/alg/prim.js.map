{"version":3,"file":"prim.js","sources":["../../lib/alg/prim.js"],"sourcesContent":["import _has from 'lodash-es/has'\nimport _each from 'lodash-es/each'\nimport Graph from '../graph'\nimport PriorityQueue from '../data/priority-queue'\nexport default prim\n\nfunction prim (g, weightFunc) {\n  const result = new Graph()\n  const parents = {}\n  const pq = new PriorityQueue()\n  let v\n\n  function updateNeighbors (edge) {\n    const w = edge.v === v ? edge.w : edge.v\n    const pri = pq.priority(w)\n\n    if (pri !== undefined) {\n      var edgeWeight = weightFunc(edge)\n\n      if (edgeWeight < pri) {\n        parents[w] = v\n        pq.decrease(w, edgeWeight)\n      }\n    }\n  }\n\n  if (g.nodeCount() === 0) {\n    return result\n  }\n\n  _each(g.nodes(), function (v) {\n    pq.add(v, Number.POSITIVE_INFINITY)\n    result.setNode(v)\n  }) // Start from an arbitrary node\n\n  pq.decrease(g.nodes()[0], 0)\n  var init = false\n\n  while (pq.size() > 0) {\n    v = pq.removeMin()\n\n    if (_has(parents, v)) {\n      result.setEdge(v, parents[v])\n    } else if (init) {\n      throw new Error('Input graph is not connected: ' + g)\n    } else {\n      init = true\n    }\n\n    g.nodeEdges(v).forEach(updateNeighbors)\n  }\n\n  return result\n}\n"],"names":[],"mappings":";;;;;AAMA,SAAS,IAAI,EAAE,CAAC,EAAE,UAAU,EAAE;AAC9B,EAAE,MAAM,MAAM,GAAG,IAAI,KAAK,GAAE;AAC5B,EAAE,MAAM,OAAO,GAAG,GAAE;AACpB,EAAE,MAAM,EAAE,GAAG,IAAI,aAAa,GAAE;AAChC,EAAE,IAAI,EAAC;AACP;AACA,EAAE,SAAS,eAAe,EAAE,IAAI,EAAE;AAClC,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,EAAC;AAC5C,IAAI,MAAM,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAC;AAC9B;AACA,IAAI,IAAI,GAAG,KAAK,SAAS,EAAE;AAC3B,MAAM,IAAI,UAAU,GAAG,UAAU,CAAC,IAAI,EAAC;AACvC;AACA,MAAM,IAAI,UAAU,GAAG,GAAG,EAAE;AAC5B,QAAQ,OAAO,CAAC,CAAC,CAAC,GAAG,EAAC;AACtB,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,UAAU,EAAC;AAClC,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA,EAAE,IAAI,CAAC,CAAC,SAAS,EAAE,KAAK,CAAC,EAAE;AAC3B,IAAI,OAAO,MAAM;AACjB,GAAG;AACH;AACA,EAAE,KAAK,CAAC,CAAC,CAAC,KAAK,EAAE,EAAE,UAAU,CAAC,EAAE;AAChC,IAAI,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,iBAAiB,EAAC;AACvC,IAAI,MAAM,CAAC,OAAO,CAAC,CAAC,EAAC;AACrB,GAAG,EAAC;AACJ;AACA,EAAE,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAC;AAC9B,EAAE,IAAI,IAAI,GAAG,MAAK;AAClB;AACA,EAAE,OAAO,EAAE,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE;AACxB,IAAI,CAAC,GAAG,EAAE,CAAC,SAAS,GAAE;AACtB;AACA,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE;AAC1B,MAAM,MAAM,CAAC,OAAO,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,EAAC;AACnC,KAAK,MAAM,IAAI,IAAI,EAAE;AACrB,MAAM,MAAM,IAAI,KAAK,CAAC,gCAAgC,GAAG,CAAC,CAAC;AAC3D,KAAK,MAAM;AACX,MAAM,IAAI,GAAG,KAAI;AACjB,KAAK;AACL;AACA,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,eAAe,EAAC;AAC3C,GAAG;AACH;AACA,EAAE,OAAO,MAAM;AACf;;;;"}