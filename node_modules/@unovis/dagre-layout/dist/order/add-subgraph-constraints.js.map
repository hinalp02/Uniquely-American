{"version":3,"file":"add-subgraph-constraints.js","sources":["../../lib/order/add-subgraph-constraints.js"],"sourcesContent":["import _forEach from 'lodash-es/forEach'\n\nfunction addSubgraphConstraints (g, cg, vs) {\n  const prev = {}\n  let rootPrev\n\n  _forEach(vs, function (v) {\n    let child = g.parent(v)\n    let parent\n    let prevChild\n\n    while (child) {\n      parent = g.parent(child)\n\n      if (parent) {\n        prevChild = prev[parent]\n        prev[parent] = child\n      } else {\n        prevChild = rootPrev\n        rootPrev = child\n      }\n\n      if (prevChild && prevChild !== child) {\n        cg.setEdge(prevChild, child)\n        return\n      }\n\n      child = parent\n    }\n  })\n  /*\n  function dfs(v) {\n    const children = v ? g.children(v) : g.children();\n    if (children.length) {\n      const min = Number.POSITIVE_INFINITY,\n          subgraphs = [];\n      _.forEach(children, function(child) {\n        const childMin = dfs(child);\n        if (g.children(child).length) {\n          subgraphs.push({ v: child, order: childMin });\n        }\n        min = Math.min(min, childMin);\n      });\n      _.reduce(_.sortBy(subgraphs, \"order\"), function(prev, curr) {\n        cg.setEdge(prev.v, curr.v);\n        return curr;\n      });\n      return min;\n    }\n    return g.node(v).order;\n  }\n  dfs(undefined);\n  */\n}\n\nexport default addSubgraphConstraints\n"],"names":[],"mappings":";;AAEA,SAAS,sBAAsB,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE;AAC5C,EAAE,MAAM,IAAI,GAAG,GAAE;AACjB,EAAE,IAAI,SAAQ;AACd;AACA,EAAE,QAAQ,CAAC,EAAE,EAAE,UAAU,CAAC,EAAE;AAC5B,IAAI,IAAI,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,EAAC;AAC3B,IAAI,IAAI,OAAM;AACd,IAAI,IAAI,UAAS;AACjB;AACA,IAAI,OAAO,KAAK,EAAE;AAClB,MAAM,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,EAAC;AAC9B;AACA,MAAM,IAAI,MAAM,EAAE;AAClB,QAAQ,SAAS,GAAG,IAAI,CAAC,MAAM,EAAC;AAChC,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,MAAK;AAC5B,OAAO,MAAM;AACb,QAAQ,SAAS,GAAG,SAAQ;AAC5B,QAAQ,QAAQ,GAAG,MAAK;AACxB,OAAO;AACP;AACA,MAAM,IAAI,SAAS,IAAI,SAAS,KAAK,KAAK,EAAE;AAC5C,QAAQ,EAAE,CAAC,OAAO,CAAC,SAAS,EAAE,KAAK,EAAC;AACpC,QAAQ,MAAM;AACd,OAAO;AACP;AACA,MAAM,KAAK,GAAG,OAAM;AACpB,KAAK;AACL,GAAG,EAAC;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;"}