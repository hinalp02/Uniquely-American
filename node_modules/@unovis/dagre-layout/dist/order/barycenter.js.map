{"version":3,"file":"barycenter.js","sources":["../../lib/order/barycenter.js"],"sourcesContent":["import _reduce from 'lodash-es/reduce'\nimport _map from 'lodash-es/map'\n\nfunction barycenter (g, movable) {\n  return _map(movable, function (v) {\n    const inV = g.inEdges(v)\n\n    if (!inV.length) {\n      return {\n        v: v\n      }\n    } else {\n      const result = _reduce(inV, function (acc, e) {\n        const edge = g.edge(e)\n        const nodeU = g.node(e.v)\n        return {\n          sum: acc.sum + edge.weight * nodeU.order,\n          weight: acc.weight + edge.weight\n        }\n      }, {\n        sum: 0,\n        weight: 0\n      })\n\n      return {\n        v: v,\n        barycenter: result.sum / result.weight,\n        weight: result.weight\n      }\n    }\n  })\n}\n\nexport default barycenter\n"],"names":[],"mappings":";;;AAGA,SAAS,UAAU,EAAE,CAAC,EAAE,OAAO,EAAE;AACjC,EAAE,OAAO,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,EAAE;AACpC,IAAI,MAAM,GAAG,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,EAAC;AAC5B;AACA,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE;AACrB,MAAM,OAAO;AACb,QAAQ,CAAC,EAAE,CAAC;AACZ,OAAO;AACP,KAAK,MAAM;AACX,MAAM,MAAM,MAAM,GAAG,OAAO,CAAC,GAAG,EAAE,UAAU,GAAG,EAAE,CAAC,EAAE;AACpD,QAAQ,MAAM,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAC;AAC9B,QAAQ,MAAM,KAAK,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAC;AACjC,QAAQ,OAAO;AACf,UAAU,GAAG,EAAE,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,KAAK;AAClD,UAAU,MAAM,EAAE,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM;AAC1C,SAAS;AACT,OAAO,EAAE;AACT,QAAQ,GAAG,EAAE,CAAC;AACd,QAAQ,MAAM,EAAE,CAAC;AACjB,OAAO,EAAC;AACR;AACA,MAAM,OAAO;AACb,QAAQ,CAAC,EAAE,CAAC;AACZ,QAAQ,UAAU,EAAE,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,MAAM;AAC9C,QAAQ,MAAM,EAAE,MAAM,CAAC,MAAM;AAC7B,OAAO;AACP,KAAK;AACL,GAAG,CAAC;AACJ;;;;"}