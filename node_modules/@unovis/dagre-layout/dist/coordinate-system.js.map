{"version":3,"file":"coordinate-system.js","sources":["../lib/coordinate-system.js"],"sourcesContent":["import _has from 'lodash-es/has'\nimport _forEach from 'lodash-es/forEach'\n\nfunction adjust (g) {\n  const rankDir = g.graph().rankdir.toLowerCase()\n\n  if (rankDir === 'lr' || rankDir === 'rl') {\n    swapWidthHeight(g)\n  }\n}\n\nfunction undo (g) {\n  const rankDir = g.graph().rankdir.toLowerCase()\n\n  if (rankDir === 'bt' || rankDir === 'rl') {\n    reverseY(g)\n  }\n\n  if (rankDir === 'lr' || rankDir === 'rl') {\n    swapXY(g)\n    swapWidthHeight(g)\n  }\n}\n\nfunction swapWidthHeight (g) {\n  _forEach(g.nodes(), function (v) {\n    swapWidthHeightOne(g.node(v))\n  })\n\n  _forEach(g.edges(), function (e) {\n    swapWidthHeightOne(g.edge(e))\n  })\n}\n\nfunction swapWidthHeightOne (attrs) {\n  const w = attrs.width\n  attrs.width = attrs.height\n  attrs.height = w\n}\n\nfunction reverseY (g) {\n  _forEach(g.nodes(), function (v) {\n    reverseYOne(g.node(v))\n  })\n\n  _forEach(g.edges(), function (e) {\n    const edge = g.edge(e)\n\n    _forEach(edge.points, reverseYOne)\n\n    if (_has(edge, 'y')) {\n      reverseYOne(edge)\n    }\n  })\n}\n\nfunction reverseYOne (attrs) {\n  attrs.y = -attrs.y\n}\n\nfunction swapXY (g) {\n  _forEach(g.nodes(), function (v) {\n    swapXYOne(g.node(v))\n  })\n\n  _forEach(g.edges(), function (e) {\n    const edge = g.edge(e)\n\n    _forEach(edge.points, swapXYOne)\n\n    if (_has(edge, 'x')) {\n      swapXYOne(edge)\n    }\n  })\n}\n\nfunction swapXYOne (attrs) {\n  const x = attrs.x\n  attrs.x = attrs.y\n  attrs.y = x\n}\n\nexport default {\n  adjust,\n  undo\n}\n"],"names":[],"mappings":"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"}