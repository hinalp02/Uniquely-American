{"version":3,"file":"index.js","sources":["../../lib/position/index.js"],"sourcesContent":["import _map from 'lodash-es/map'\nimport _max from 'lodash-es/max'\nimport _forEach from 'lodash-es/forEach'\nimport util from '../util'\nimport { positionX } from './bk'\n\nfunction position (g) {\n  g = util.asNonCompoundGraph(g)\n  positionY(g)\n\n  _forEach(positionX(g), function (x, v) {\n    g.node(v).x = x\n  })\n}\n\nfunction positionY (g) {\n  const layering = util.buildLayerMatrix(g)\n  const rankSep = g.graph().ranksep\n  let prevY = 0\n\n  _forEach(layering, function (layer) {\n    const maxHeight = _max(_map(layer, function (v) {\n      return g.node(v).height\n    }))\n\n    _forEach(layer, function (v) {\n      g.node(v).y = prevY + maxHeight / 2\n    })\n\n    prevY += maxHeight + rankSep\n  })\n}\n\nexport default position\n"],"names":[],"mappings":";;;;;;AAMA,SAAS,QAAQ,EAAE,CAAC,EAAE;AACtB,EAAE,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC,EAAC;AAChC,EAAE,SAAS,CAAC,CAAC,EAAC;AACd;AACA,EAAE,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,UAAU,CAAC,EAAE,CAAC,EAAE;AACzC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAC;AACnB,GAAG,EAAC;AACJ,CAAC;AACD;AACA,SAAS,SAAS,EAAE,CAAC,EAAE;AACvB,EAAE,MAAM,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAC,EAAC;AAC3C,EAAE,MAAM,OAAO,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC,QAAO;AACnC,EAAE,IAAI,KAAK,GAAG,EAAC;AACf;AACA,EAAE,QAAQ,CAAC,QAAQ,EAAE,UAAU,KAAK,EAAE;AACtC,IAAI,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,UAAU,CAAC,EAAE;AACpD,MAAM,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM;AAC7B,KAAK,CAAC,EAAC;AACP;AACA,IAAI,QAAQ,CAAC,KAAK,EAAE,UAAU,CAAC,EAAE;AACjC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,GAAG,SAAS,GAAG,EAAC;AACzC,KAAK,EAAC;AACN;AACA,IAAI,KAAK,IAAI,SAAS,GAAG,QAAO;AAChC,GAAG,EAAC;AACJ;;;;"}