{"version":3,"file":"patterns.js","sources":["../../src/styles/patterns.ts"],"sourcesContent":["import { getCSSColorVariable } from './colors'\n\ntype Pattern = {\n  id: string;\n  width?: number;\n  height?: number;\n}\n\ntype FillPattern = Pattern & {\n  svg: string;\n}\n\ntype LinePattern = Pattern & {\n  marker: string;\n  dashArray: number[];\n}\n\nexport const PATTERN_SIZE_PX = 10\n\nexport const fills: FillPattern[] = [\n  { id: 'stripes-diagonal', svg: '<path d=\"M-1,1 l2,-2 M0,10 l10,-10 M9,11 l2,-2\" stroke=\"#000\"/>' },\n  { id: 'dots', svg: '<path d=\"m0-1.5a1 1 0 010 3m10-3a1 1 0 000 3M5 3.5a1 1 0 010 3 1 1 0 010-3M0 8.5 a1 1 0 010 3m10-3a1 1 0 000 3\" fill\"#000\"/>' },\n  { id: 'stripes-vertical', svg: '<path d=\"M 5,-1 L5,11\" stroke=\"#000\"/>' },\n  { id: 'crosshatch', svg: '<path d=\"M0 0L10 10ZM10 0L0 10Z\" stroke=\"#000\"/>' },\n  { id: 'waves', svg: '<path d=\"M0 4Q2.5 1 5 4 7.5 7 10 4v2Q7.5 9 5 6 2.5 3 0 6Z\" fill=\"#000\"/>' },\n  { id: 'circles', svg: '<circle cx=\"5\" cy=\"5\" r=\"3\" stroke=\"#000\" fill=\"#fff\"/>' },\n]\nexport const lines: LinePattern[] = [\n  { id: 'circle', marker: '<circle cx=\"5\" cy=\"5\" r=\"5\"/>', dashArray: [] },\n  { id: 'triangle', marker: '<path d=\"M5,0 L10,9 L0,9Z\">', dashArray: [9, 1] },\n  { id: 'diamond', marker: '<path d=\"M 0 5 L5 0 L 10 5 L 5 10 L 0 5Z\">', dashArray: [2] },\n  { id: 'arrow', marker: '<path d=\"M4 0 0 0 6 5 0 10 4 10 10 5Z\">', dashArray: [2, 3, 8, 3] },\n  { id: 'square', marker: '<rect x=\"1\" y=\"1\" width=\"8\" height=\"8\"/>', dashArray: [6] },\n  { id: 'star', marker: '<path d=\"m2 9 3-9 3 9L0 3h10Z\"/>', dashArray: [1, 6] },\n]\n\nexport function getPatternVariable (p: Pattern): string {\n  return `vis-${`pattern-${(p as FillPattern).svg ? 'fill' : 'marker'}`}-${p.id}`\n}\n\nconst maskDef = (p: FillPattern): string =>\n  `<mask id=\"${getPatternVariable(p)}\">\n    <pattern id=\"${p.id}\" viewBox=\"0 0 10 10\" width=\"${PATTERN_SIZE_PX}\" height=\"${PATTERN_SIZE_PX}\" patternUnits=\"userSpaceOnUse\">\n      <rect width=\"100%\" height=\"100%\" fill=\"#fff\"/>\n      ${p.svg}\n    </pattern>\n    <rect x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\" fill=\"url(#${p.id})\"/>\n  </mask>`\n\nconst markerDef = (p: LinePattern, i: number): string =>\n  `<marker id=\"${getPatternVariable(p)}\"\n    fill=\"var(${getCSSColorVariable(i)})\"\n    markerUnits=\"userSpaceOnUse\"\n    refX=\"5\"\n    refY=\"5\"\n    markerWidth=\"${PATTERN_SIZE_PX}\"\n    markerHeight=\"${PATTERN_SIZE_PX}\">\n    ${p.marker}\n  </marker>`\n\n// // Injecting SVG defs as a single SVG element on the page\nfunction injectSVGDefs (): void {\n  const svgDefs = fills.map(maskDef).concat(lines.map(markerDef)).join('')\n  const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n  svg.setAttribute('height', '100%')\n  svg.setAttribute('width', '100%')\n  svg.style.position = 'fixed'\n  svg.style.zIndex = '-99999999'\n  svg.innerHTML = `<defs>${svgDefs}</defs>`\n  document.body.appendChild(svg)\n}\n\nif (typeof window !== 'undefined') injectSVGDefs()\n"],"names":[],"mappings":"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"}