{"version":3,"file":"mapboxgl-utils.js","sources":["../../../../src/components/leaflet-map/renderer/mapboxgl-utils.ts"],"sourcesContent":["import type L from 'leaflet'\nimport type { Map } from 'maplibre-gl'\n\n// Utils\nimport { throttle } from 'utils/data'\n\nexport function constraintMapView (map: L.Map, latMin = -75, latMax = 85): void {\n  const bounds = map.getBounds()\n  const northEast = bounds.getNorthEast()\n  const southWest = bounds.getSouthWest()\n\n  if (northEast.lat > latMax && southWest.lat < latMin) {\n    map.fitBounds([\n      [latMin, 0],\n      [latMax, 0],\n    ])\n  }\n}\n\nexport function mapboxglWheelEvent (\n  map: L.Map,\n  layer: L.Layer & { getMaplibreMap(): Map },\n  event: WheelEvent\n): void {\n  const { deltaY } = event\n  if (!layer || !layer.getMaplibreMap) return\n  const mapboxmap = layer.getMaplibreMap()\n  const delta = deltaY * -1\n\n  // Prevent Map from being zoomed-out too far away\n  const bounds = map.getBounds()\n  const northEast = bounds.getNorthEast()\n  const southWest = bounds.getSouthWest()\n  const latMin = -70\n  const latMax = 80\n  if (delta < 0 && northEast.lat > latMax && southWest.lat < latMin) {\n    constraintMapView(map)\n    return\n  }\n\n  const zoom = mapboxmap.getZoom() + delta * 0.001\n  const xy = map.mouseEventToLayerPoint(event)\n  map.setZoomAround(xy, zoom + 1, { animate: false })\n}\n\nexport const mapboxglWheelEventThrottled = throttle(mapboxglWheelEvent, 32)\nexport const constraintMapViewThrottled = throttle(constraintMapView, 1000)\n"],"names":[],"mappings":";;AAGA;AAGgB,SAAA,iBAAiB,CAAE,GAAU,EAAE,MAAM,GAAG,CAAC,EAAE,EAAE,MAAM,GAAG,EAAE,EAAA;AACtE,IAAA,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE,CAAA;AAC9B,IAAA,MAAM,SAAS,GAAG,MAAM,CAAC,YAAY,EAAE,CAAA;AACvC,IAAA,MAAM,SAAS,GAAG,MAAM,CAAC,YAAY,EAAE,CAAA;IAEvC,IAAI,SAAS,CAAC,GAAG,GAAG,MAAM,IAAI,SAAS,CAAC,GAAG,GAAG,MAAM,EAAE;QACpD,GAAG,CAAC,SAAS,CAAC;YACZ,CAAC,MAAM,EAAE,CAAC,CAAC;YACX,CAAC,MAAM,EAAE,CAAC,CAAC;AACZ,SAAA,CAAC,CAAA;AACH,KAAA;AACH,CAAC;SAEe,kBAAkB,CAChC,GAAU,EACV,KAA0C,EAC1C,KAAiB,EAAA;AAEjB,IAAA,MAAM,EAAE,MAAM,EAAE,GAAG,KAAK,CAAA;AACxB,IAAA,IAAI,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,cAAc;QAAE,OAAM;AAC3C,IAAA,MAAM,SAAS,GAAG,KAAK,CAAC,cAAc,EAAE,CAAA;AACxC,IAAA,MAAM,KAAK,GAAG,MAAM,GAAG,CAAC,CAAC,CAAA;;AAGzB,IAAA,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE,CAAA;AAC9B,IAAA,MAAM,SAAS,GAAG,MAAM,CAAC,YAAY,EAAE,CAAA;AACvC,IAAA,MAAM,SAAS,GAAG,MAAM,CAAC,YAAY,EAAE,CAAA;AACvC,IAAA,MAAM,MAAM,GAAG,CAAC,EAAE,CAAA;IAClB,MAAM,MAAM,GAAG,EAAE,CAAA;AACjB,IAAA,IAAI,KAAK,GAAG,CAAC,IAAI,SAAS,CAAC,GAAG,GAAG,MAAM,IAAI,SAAS,CAAC,GAAG,GAAG,MAAM,EAAE;QACjE,iBAAiB,CAAC,GAAG,CAAC,CAAA;QACtB,OAAM;AACP,KAAA;IAED,MAAM,IAAI,GAAG,SAAS,CAAC,OAAO,EAAE,GAAG,KAAK,GAAG,KAAK,CAAA;IAChD,MAAM,EAAE,GAAG,GAAG,CAAC,sBAAsB,CAAC,KAAK,CAAC,CAAA;AAC5C,IAAA,GAAG,CAAC,aAAa,CAAC,EAAE,EAAE,IAAI,GAAG,CAAC,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAA;AACrD,CAAC;AAEY,MAAA,2BAA2B,GAAG,QAAQ,CAAC,kBAAkB,EAAE,EAAE,EAAC;AAC9D,MAAA,0BAA0B,GAAG,QAAQ,CAAC,iBAAiB,EAAE,IAAI;;;;"}