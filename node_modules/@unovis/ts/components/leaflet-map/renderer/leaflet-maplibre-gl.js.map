{"version":3,"file":"leaflet-maplibre-gl.js","sources":["../../../../src/components/leaflet-map/renderer/leaflet-maplibre-gl.js"],"sourcesContent":["// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\nexport function MaplibreGLLayer (leaflet, maplibre, options) {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  const Layer = leaflet.Layer.extend({\n    options: {\n      updateInterval: 32,\n      // How much to extend the overlay view (relative to map size)\n      // e.g. 0.1 would be 10% of map view in each direction\n      padding: 0.1,\n      // whether or not to register the mouse and keyboard\n      // events on the maplibre overlay\n      interactive: false,\n      // set the tilepane as the default pane to draw gl tiles\n      pane: 'tilePane',\n    },\n\n    initialize: function (options) {\n      leaflet.setOptions(this, options)\n\n      // setup throttling the update event when panning\n      this._throttledUpdate = leaflet.Util.throttle(this._update, this.options.updateInterval, this)\n    },\n\n    onAdd: function (map) {\n      if (!this._container) {\n        this._initContainer()\n      }\n\n      const paneName = this.getPaneName()\n      map.getPane(paneName).appendChild(this._container)\n\n      this._initGL()\n\n      this._offset = this._map.containerPointToLayerPoint([0, 0])\n\n      // work around https://github.com/mapbox/mapbox-gl-leaflet/issues/47\n      if (map.options.zoomAnimation) {\n        leaflet.DomEvent.on(map._proxy, leaflet.DomUtil.TRANSITION_END, this._transitionEnd, this)\n      }\n    },\n\n    onRemove: function (map) {\n      if (this._map._proxy && this._map.options.zoomAnimation) {\n        leaflet.DomEvent.off(this._map._proxy, leaflet.DomUtil.TRANSITION_END, this._transitionEnd, this)\n      }\n      const paneName = this.getPaneName()\n      map.getPane(paneName).removeChild(this._container)\n\n      this._glMap.remove()\n      this._glMap = null\n    },\n\n    getEvents: function () {\n      return {\n        move: this._throttledUpdate, // sensibly throttle updating while panning\n        zoomanim: this._animateZoom, // applys the zoom animation to the <canvas>\n        zoom: this._pinchZoom, // animate every zoom event for smoother pinch-zooming\n        zoomstart: this._zoomStart, // flag starting a zoom to disable panning\n        zoomend: this._zoomEnd,\n        resize: this._resize,\n      }\n    },\n\n    getMaplibreMap: function () {\n      return this._glMap\n    },\n\n    getCanvas: function () {\n      return this._glMap.getCanvas()\n    },\n\n    getSize: function () {\n      return this._map.getSize().multiplyBy(1 + this.options.padding * 2)\n    },\n\n    getBounds: function () {\n      const halfSize = this.getSize().multiplyBy(0.5)\n      const center = this._map.latLngToContainerPoint(this._map.getCenter())\n      return leaflet.latLngBounds(\n        this._map.containerPointToLatLng(center.subtract(halfSize)),\n        this._map.containerPointToLatLng(center.add(halfSize))\n      )\n    },\n\n    getContainer: function () {\n      return this._container\n    },\n\n    // returns the pane name set in options if it is a valid pane, defaults to tilePane\n    getPaneName: function () {\n      return this._map.getPane(this.options.pane) ? this.options.pane : 'tilePane'\n    },\n\n    _initContainer: function () {\n      const container = this._container = leaflet.DomUtil.create('div', 'leaflet-gl-layer')\n\n      const size = this.getSize()\n      const offset = this._map.getSize().multiplyBy(this.options.padding)\n      container.style.width = `${size.x}px`\n      container.style.height = `${size.y}px`\n\n      const topLeft = this._map.containerPointToLayerPoint([0, 0]).subtract(offset)\n\n      leaflet.DomUtil.setPosition(container, topLeft)\n    },\n\n    _initGL: function () {\n      const center = this._map.getCenter()\n\n      const options = leaflet.extend({}, this.options, {\n        container: this._container,\n        center: [center.lng, center.lat],\n        zoom: this._map.getZoom() - 1,\n        attributionControl: false,\n      })\n\n      this._glMap = new maplibre.Map(options)\n\n      // allow GL base map to pan beyond min/max latitudes\n      this._glMap.transform.latRange = null\n      this._glMap.transform.maxValidLatitude = Infinity\n\n      this._transformGL(this._glMap)\n\n      if (this._glMap._canvas.canvas) {\n        // older versions of mapbox-gl surfaced the canvas differently\n        this._glMap._actualCanvas = this._glMap._canvas.canvas\n      } else {\n        this._glMap._actualCanvas = this._glMap._canvas\n      }\n\n      // treat child <canvas> element like leaflet.ImageOverlay\n      const canvas = this._glMap._actualCanvas\n      leaflet.DomUtil.addClass(canvas, 'leaflet-image-layer')\n      leaflet.DomUtil.addClass(canvas, 'leaflet-zoom-animated')\n      if (this.options.interactive) {\n        leaflet.DomUtil.addClass(canvas, 'leaflet-interactive')\n      }\n      if (this.options.className) {\n        leaflet.DomUtil.addClass(canvas, this.options.className)\n      }\n    },\n\n    _update: function (e) {\n      // update the offset so we can correct for it later when we zoom\n      this._offset = this._map.containerPointToLayerPoint([0, 0])\n\n      if (this._zooming) {\n        return\n      }\n\n      const size = this.getSize()\n      const container = this._container\n      const gl = this._glMap\n      const offset = this._map.getSize().multiplyBy(this.options.padding)\n      const topLeft = this._map.containerPointToLayerPoint([0, 0]).subtract(offset)\n\n      leaflet.DomUtil.setPosition(container, topLeft)\n\n      this._transformGL(gl)\n\n      if (gl.transform.width !== size.x || gl.transform.height !== size.y) {\n        container.style.width = `${size.x}px`\n        container.style.height = `${size.y}px`\n        if (gl._resize !== null && gl._resize !== undefined) {\n          gl._resize()\n        } else {\n          gl.resize()\n        }\n      } else {\n        // older versions of mapbox-gl surfaced update publicly\n        if (gl._update !== null && gl._update !== undefined) {\n          gl._update()\n        } else {\n          gl.update()\n        }\n      }\n    },\n\n    _transformGL: function (gl) {\n      const center = this._map.getCenter()\n\n      // gl.setView([center.lat, center.lng], this._map.getZoom() - 1, 0);\n      // calling setView directly causes sync issues because it uses requestAnimFrame\n\n      const tr = gl.transform\n      tr.center = maplibre.LngLat.convert([center.lng, center.lat])\n      tr.zoom = this._map.getZoom() - 1\n    },\n\n    // update the map constantly during a pinch zoom\n    _pinchZoom: function (e) {\n      this._glMap.jumpTo({\n        zoom: this._map.getZoom() - 1,\n        center: this._map.getCenter(),\n      })\n    },\n\n    // borrowed from leaflet.ImageOverlay\n    // https://github.com/Leaflet/Leaflet/blob/master/src/layer/ImageOverlay.js#L139-L144\n    _animateZoom: function (e) {\n      const scale = this._map.getZoomScale(e.zoom)\n      const padding = this._map.getSize().multiplyBy(this.options.padding * scale)\n      const viewHalf = this.getSize()._divideBy(2)\n      // corrections for padding (scaled), adapted from\n      // https://github.com/Leaflet/Leaflet/blob/master/src/map/Map.js#L1490-L1508\n      const topLeft = this._map.project(e.center, e.zoom)\n        ._subtract(viewHalf)\n        ._add(this._map._getMapPanePos()\n          .add(padding))._round()\n      const offset = this._map.project(this._map.getBounds().getNorthWest(), e.zoom)\n        ._subtract(topLeft)\n\n      leaflet.DomUtil.setTransform(\n        this._glMap._actualCanvas,\n        offset.subtract(this._offset),\n        scale\n      )\n    },\n\n    _zoomStart: function (e) {\n      this._zooming = true\n    },\n\n    _zoomEnd: function () {\n      const scale = this._map.getZoomScale(this._map.getZoom())\n\n      leaflet.DomUtil.setTransform(\n        this._glMap._actualCanvas,\n        // https://github.com/mapbox/mapbox-gl-leaflet/pull/130\n        null,\n        scale\n      )\n\n      this._zooming = false\n\n      this._update()\n    },\n\n    _transitionEnd: function (e) {\n      leaflet.Util.requestAnimFrame(function () {\n        const zoom = this._map.getZoom()\n        const center = this._map.getCenter()\n        const offset = this._map.latLngToContainerPoint(\n          this._map.getBounds().getNorthWest()\n        )\n\n        // reset the scale and offset\n        leaflet.DomUtil.setTransform(this._glMap._actualCanvas, offset, 1)\n\n        // enable panning once the gl map is ready again\n        this._glMap.once('moveend', leaflet.Util.bind(function () {\n          this._zoomEnd()\n        }, this))\n\n        // update the map position\n        this._glMap.jumpTo({\n          center: center,\n          zoom: zoom - 1,\n        })\n      }, this)\n    },\n\n    _resize: function (e) {\n      this._transitionEnd(e)\n    },\n  })\n\n  return new Layer(options)\n}\n\n"],"names":[],"mappings":"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"}