{"version":3,"file":"clusterBackground.js","sources":["../../../../src/components/leaflet-map/modules/clusterBackground.ts"],"sourcesContent":["import { Selection } from 'd3-selection'\nimport type L from 'leaflet'\n\n// Types\nimport { GenericDataRecord } from 'types/data'\n\n// Utils\nimport { cloneDeep } from 'utils/data'\nimport { getPointPos, getNodePathData } from './utils'\n\n// Local Types\nimport { LeafletMapPointShape, LeafletMapExpandedCluster } from '../types'\n\n// Config Interface\nimport { LeafletMapConfigInterface } from '../config'\n\nexport function createBackgroundNode (selection: Selection<SVGGElement, unknown, SVGElement, undefined>): void {\n  selection.datum({ _zIndex: 1 })\n  selection.append('path')\n}\n\nexport function updateBackgroundNode<D extends GenericDataRecord> (\n  selection: Selection<SVGGElement, unknown, SVGElement, undefined>,\n  expandedCluster: LeafletMapExpandedCluster<D>,\n  config: LeafletMapConfigInterface<D>,\n  leafletMap: L.Map,\n  clusterBackgroundRadius: number\n): void {\n  const { clusterBackground } = config\n  if (expandedCluster && clusterBackground) {\n    const node = cloneDeep(expandedCluster.cluster)\n    const { x, y } = getPointPos(node, leafletMap)\n    const path = getNodePathData({ x: 0, y: 0 }, clusterBackgroundRadius, LeafletMapPointShape.Circle)\n    selection.select('path').attr('d', d => path)\n    selection\n      .classed('active', true)\n      .attr('transform', `translate(${x},${y})`)\n  } else {\n    selection.classed('active', false)\n  }\n}\n"],"names":[],"mappings":";;;;AAMA;AAUM,SAAU,oBAAoB,CAAE,SAAiE,EAAA;IACrG,SAAS,CAAC,KAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAA;AAC/B,IAAA,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;AAC1B,CAAC;AAEK,SAAU,oBAAoB,CAClC,SAAiE,EACjE,eAA6C,EAC7C,MAAoC,EACpC,UAAiB,EACjB,uBAA+B,EAAA;AAE/B,IAAA,MAAM,EAAE,iBAAiB,EAAE,GAAG,MAAM,CAAA;IACpC,IAAI,eAAe,IAAI,iBAAiB,EAAE;QACxC,MAAM,IAAI,GAAG,SAAS,CAAC,eAAe,CAAC,OAAO,CAAC,CAAA;AAC/C,QAAA,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,WAAW,CAAC,IAAI,EAAE,UAAU,CAAC,CAAA;QAC9C,MAAM,IAAI,GAAG,eAAe,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,uBAAuB,EAAE,oBAAoB,CAAC,MAAM,CAAC,CAAA;AAClG,QAAA,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,IAAI,IAAI,CAAC,CAAA;QAC7C,SAAS;AACN,aAAA,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC;aACvB,IAAI,CAAC,WAAW,EAAE,CAAA,UAAA,EAAa,CAAC,CAAI,CAAA,EAAA,CAAC,CAAG,CAAA,CAAA,CAAC,CAAA;AAC7C,KAAA;AAAM,SAAA;AACL,QAAA,SAAS,CAAC,OAAO,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAA;AACnC,KAAA;AACH;;;;"}