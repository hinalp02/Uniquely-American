{"version":3,"file":"donut.js","sources":["../../../../src/components/leaflet-map/modules/donut.ts"],"sourcesContent":["import { Selection } from 'd3-selection'\nimport { pie, arc, PieArcDatum } from 'd3-shape'\n\n// Local Types\nimport { LeafletMapPieDatum } from '../types'\n\nconst pieConstructor = pie<LeafletMapPieDatum>()\n  .sort(null)\n  .value((d: LeafletMapPieDatum): number => d.value)\n\nexport function updateDonut (\n  selection: Selection<SVGGElement, unknown, null, undefined>,\n  data: LeafletMapPieDatum[],\n  radius: number,\n  arcWidth = 2,\n  padAngle = 0.05\n): void {\n  pieConstructor.padAngle(padAngle)\n  const arcs = pieConstructor(data.filter(d => d.value))\n\n  const arcPathGen = arc<PieArcDatum<LeafletMapPieDatum>>()\n    .innerRadius(arcWidth ? radius - arcWidth / 2 : 0)\n    .outerRadius(arcWidth ? radius + arcWidth / 2 : radius)\n\n  const donuts = selection.selectAll<SVGPathElement, LeafletMapPieDatum>('path')\n    .data(arcs)\n\n  donuts.exit().remove()\n\n  donuts.enter()\n    .append('path')\n    .merge(donuts)\n    .attr('class', d => d.data.className ?? null)\n    .attr('d', arcPathGen)\n    .style('fill', d => d.data.color ?? null)\n    .style('stroke', d => d.data.color ?? null)\n}\n"],"names":[],"mappings":";;AAMA,MAAM,cAAc,GAAG,GAAG,EAAsB;KAC7C,IAAI,CAAC,IAAI,CAAC;KACV,KAAK,CAAC,CAAC,CAAqB,KAAa,CAAC,CAAC,KAAK,CAAC,CAAA;AAEpC,SAAA,WAAW,CACzB,SAA2D,EAC3D,IAA0B,EAC1B,MAAc,EACd,QAAQ,GAAG,CAAC,EACZ,QAAQ,GAAG,IAAI,EAAA;AAEf,IAAA,cAAc,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAA;AACjC,IAAA,MAAM,IAAI,GAAG,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,CAAA;IAEtD,MAAM,UAAU,GAAG,GAAG,EAAmC;AACtD,SAAA,WAAW,CAAC,QAAQ,GAAG,MAAM,GAAG,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAC;AACjD,SAAA,WAAW,CAAC,QAAQ,GAAG,MAAM,GAAG,QAAQ,GAAG,CAAC,GAAG,MAAM,CAAC,CAAA;AAEzD,IAAA,MAAM,MAAM,GAAG,SAAS,CAAC,SAAS,CAAqC,MAAM,CAAC;SAC3E,IAAI,CAAC,IAAI,CAAC,CAAA;AAEb,IAAA,MAAM,CAAC,IAAI,EAAE,CAAC,MAAM,EAAE,CAAA;IAEtB,MAAM,CAAC,KAAK,EAAE;SACX,MAAM,CAAC,MAAM,CAAC;SACd,KAAK,CAAC,MAAM,CAAC;AACb,SAAA,IAAI,CAAC,OAAO,EAAE,CAAC,cAAI,OAAA,CAAA,EAAA,GAAA,CAAC,CAAC,IAAI,CAAC,SAAS,mCAAI,IAAI,CAAA,EAAA,CAAC;AAC5C,SAAA,IAAI,CAAC,GAAG,EAAE,UAAU,CAAC;AACrB,SAAA,KAAK,CAAC,MAAM,EAAE,CAAC,cAAI,OAAA,CAAA,EAAA,GAAA,CAAC,CAAC,IAAI,CAAC,KAAK,mCAAI,IAAI,CAAA,EAAA,CAAC;AACxC,SAAA,KAAK,CAAC,QAAQ,EAAE,CAAC,cAAI,OAAA,CAAA,EAAA,GAAA,CAAC,CAAC,IAAI,CAAC,KAAK,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,IAAI,CAAA,EAAA,CAAC,CAAA;AAC/C;;;;"}