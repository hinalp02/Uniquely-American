{"version":3,"file":"index.js","sources":["../../../src/components/vis-controls/index.ts"],"sourcesContent":["import { Selection, select } from 'd3-selection'\n\n// Utils\nimport { merge } from 'utils/data'\n\n// Local Types\nimport { VisControlItemInterface, VisControlsOrientation } from './types'\n\n// Config\nimport { VisControlsDefaultConfig, VisControlsConfigInterface } from './config'\n\n// Style\nimport * as s from './style'\n\nexport class VisControls {\n  div: Selection<HTMLDivElement, unknown, null, undefined>\n  element: HTMLDivElement\n  protected _defaultConfig = VisControlsDefaultConfig as VisControlsConfigInterface\n  public config: VisControlsConfigInterface = this._defaultConfig\n\n  protected _container: HTMLElement\n  protected _items: Selection<HTMLDivElement, unknown, null, undefined>\n\n  constructor (element: HTMLElement, config?: VisControlsConfigInterface) {\n    this._container = element\n\n    this.div = select(this._container)\n      .append('div')\n      .attr('class', s.root)\n    this.element = this.div.node()\n    this._items = this.div.append('div')\n      .attr('class', s.items)\n\n    if (config) this.update(config)\n  }\n\n  update (config: VisControlsConfigInterface): void {\n    this.config = merge(this._defaultConfig, config)\n    this.render()\n  }\n\n  render (): void {\n    const { config: { items, orientation } } = this\n    this._items\n      .classed(s.horizontalItems, orientation === VisControlsOrientation.Horizontal)\n    const controlItems = this._items.selectAll<HTMLDivElement, VisControlItemInterface>(`.${s.item}`)\n      .data(items)\n\n    const controlItemsEnter = controlItems.enter()\n      .append('div')\n      .attr('class', s.item)\n      .on('click', this._onItemClick.bind(this))\n\n    controlItemsEnter.append('button')\n      .attr('class', s.itemButton)\n\n    const controlItemsMerged = controlItemsEnter.merge(controlItems)\n    controlItemsMerged\n      .classed(s.borderLeft, d => d.borderLeft)\n      .classed(s.borderTop, d => d.borderTop)\n      .classed(s.borderRight, d => d.borderRight)\n      .classed(s.borderBottom, d => d.borderBottom)\n      .classed(s.disabled, d => d.disabled)\n    controlItemsMerged.select(`.${s.itemButton}`)\n      .html(item => item.icon)\n\n    controlItems.exit().remove()\n  }\n\n  _onItemClick (event: MouseEvent, item: VisControlItemInterface): void {\n    item.callback?.(event)\n  }\n}\n"],"names":["s.root","s.items","s.horizontalItems","s.item","s.itemButton","s.borderLeft","s.borderTop","s.borderRight","s.borderBottom","s.disabled"],"mappings":";;;;;;MAca,WAAW,CAAA;IAStB,WAAa,CAAA,OAAoB,EAAE,MAAmC,EAAA;QAN5D,IAAc,CAAA,cAAA,GAAG,wBAAsD,CAAA;AAC1E,QAAA,IAAA,CAAA,MAAM,GAA+B,IAAI,CAAC,cAAc,CAAA;AAM7D,QAAA,IAAI,CAAC,UAAU,GAAG,OAAO,CAAA;QAEzB,IAAI,CAAC,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;aAC/B,MAAM,CAAC,KAAK,CAAC;AACb,aAAA,IAAI,CAAC,OAAO,EAAEA,IAAM,CAAC,CAAA;QACxB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAA;QAC9B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC;AACjC,aAAA,IAAI,CAAC,OAAO,EAAEC,KAAO,CAAC,CAAA;AAEzB,QAAA,IAAI,MAAM;AAAE,YAAA,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;KAChC;AAED,IAAA,MAAM,CAAE,MAAkC,EAAA;QACxC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,cAAc,EAAE,MAAM,CAAC,CAAA;QAChD,IAAI,CAAC,MAAM,EAAE,CAAA;KACd;IAED,MAAM,GAAA;QACJ,MAAM,EAAE,MAAM,EAAE,EAAE,KAAK,EAAE,WAAW,EAAE,EAAE,GAAG,IAAI,CAAA;AAC/C,QAAA,IAAI,CAAC,MAAM;aACR,OAAO,CAACC,eAAiB,EAAE,WAAW,KAAK,sBAAsB,CAAC,UAAU,CAAC,CAAA;AAChF,QAAA,MAAM,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAA0C,CAAI,CAAA,EAAAC,IAAM,EAAE,CAAC;aAC9F,IAAI,CAAC,KAAK,CAAC,CAAA;AAEd,QAAA,MAAM,iBAAiB,GAAG,YAAY,CAAC,KAAK,EAAE;aAC3C,MAAM,CAAC,KAAK,CAAC;AACb,aAAA,IAAI,CAAC,OAAO,EAAEA,IAAM,CAAC;AACrB,aAAA,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;AAE5C,QAAA,iBAAiB,CAAC,MAAM,CAAC,QAAQ,CAAC;AAC/B,aAAA,IAAI,CAAC,OAAO,EAAEC,UAAY,CAAC,CAAA;QAE9B,MAAM,kBAAkB,GAAG,iBAAiB,CAAC,KAAK,CAAC,YAAY,CAAC,CAAA;QAChE,kBAAkB;AACf,aAAA,OAAO,CAACC,UAAY,EAAE,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC;AACxC,aAAA,OAAO,CAACC,SAAW,EAAE,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC;AACtC,aAAA,OAAO,CAACC,WAAa,EAAE,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC;AAC1C,aAAA,OAAO,CAACC,YAAc,EAAE,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC;AAC5C,aAAA,OAAO,CAACC,QAAU,EAAE,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,CAAA;QACvC,kBAAkB,CAAC,MAAM,CAAC,CAAA,CAAA,EAAIL,UAAY,EAAE,CAAC;aAC1C,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,CAAA;AAE1B,QAAA,YAAY,CAAC,IAAI,EAAE,CAAC,MAAM,EAAE,CAAA;KAC7B;IAED,YAAY,CAAE,KAAiB,EAAE,IAA6B,EAAA;;QAC5D,CAAA,EAAA,GAAA,IAAI,CAAC,QAAQ,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA,CAAb,IAAI,EAAY,KAAK,CAAC,CAAA;KACvB;AACF;;;;"}